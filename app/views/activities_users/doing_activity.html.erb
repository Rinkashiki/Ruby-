<%= stylesheet_link_tag 'users' %>
<div class="container", id="container">
  <br>
  <div class="center handheld_display">
    <% flash.each do |type, msg| %>
      <div class="alert alert-success alert-dismissible d-inline-block" role="alert">
        <%= msg %>
      </div> 
    <% end %>
    <% flash.delete(:alert) %>
    <h1>Pregunta <%= @n_question + 1 %></h1>
    <% if @type == 'Trivia' %>
      <%= render 'doing_trivia' %>
    <% end %>
    <% if @type == 'Video Trivia' %>
      <%= render 'doing_video_trivia' %>
    <% end %>
    <% if @type == 'Video Test' %>
      <%= render 'doing_video_test' %>
    <% end %>
    <% if @type == 'Pregunta Abierta' %>
      <%= render 'doing_open_question' %>
    <% end %>
  </div>
  <p class="center m-5"><%= link_to 'Continuar mÃ¡s tarde', activities_users_path(activity: @activity.id, n_question: @n_question), class: 'btn btn-primary' %></p>
</div><!--"/reset_activity?activity='#{@activity.id}'"-->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    let clicked = false;
    document.getElementById('submit-response').addEventListener('onclick', () => clicked = true);
    window.addEventListener('beforeunload', (event) => {
      if (!clicked) {
        event.preventDefault();
        result = confirm('You sure you want to leave?');
        event.returnValue = result;
        if(result){
          window.location.href = "<%= reset_activity_path(activity: @activity.id) %>" 
        }
        
      }
    });
  });
</script>